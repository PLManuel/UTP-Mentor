<button
  id="openChat"
  class="fixed bottom-6 right-6 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded shadow-lg z-50"
>
  ðŸ’¬ Chat
</button>

<script>
  document.addEventListener("astro:page-load", () => {
    const openChatBtn = document.getElementById("openChat")

    let chatLoaded = false

    openChatBtn?.addEventListener("click", () => {
      if (chatLoaded) return
      chatLoaded = true

      const script = document.createElement("script")
      script.src = "https://cdn.landbot.io/landbot-3/landbot-3.0.0.mjs"
      script.type = "module"
      script.async = true

      script.onload = () => {
        new Landbot.Livechat({
          configUrl:
            "https://storage.googleapis.com/landbot.online/v3/H-2978423-CY4ZP7FHOJHZ7KJS/index.json",
        })
      }

      document.head.appendChild(script)
    })
  })
</script>
